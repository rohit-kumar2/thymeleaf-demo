<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script> 

<div xmlns:th="http://www.thymeleaf.org">
	<form id="order-frm" method="post" th:action="@{/order}" th:object="${order}">
		<input type="hidden" th:field="${order.customer}"/>
		<table>
			<tr>
				<th>
					<span th:text="#{product.name}"></span>
				</th>
				<th>
					<span th:text="#{product.price}"></span>
				</th>
				<th>
					<span th:text="#{product.quantity}"></span>
				</th>
			</tr>
			<tr th:each="product, itr : ${products}" th:if="${product.inStock}">
				<td>
					<input type="hidden" th:name="${'orderLines['+ itr.index +'].product.id'}" th:value="${product.id}"/>
					<span th:text="${product.name}"></span>
				</td>
				<td>
					<span th:text="${product.price}"></span>
				</td>
				<td>
					<input type="number" th:name="${'orderLines['+ itr.index +'].quantity'}" th:value="${'orderLines['+ itr.index +'].quantity'}"/>
				</td>
				<td>
					<input type="hidden" th:id="${'isOrdered['+ itr.index +']'}" th:name="${'orderLines['+ itr.index +'].isOrdered'}"/>
					<button th:id="${itr.index}" type="button" class="add">Add Item</button>
				</td>
			</tr>
			<tr>
				<td>
					<label>Street</label>
					<input type="text" th:field="${order.shippingAddress.street}"/>
				</td>
				<td>
					<label>City</label>
					<input type="text" th:field="${order.shippingAddress.city}"/>
				</td>
				<td>
					<label>Pin Code</label>
					<input type="text" th:field="${order.shippingAddress.zip}"/>
				</td>
				<td>
					<button type="submit" >Place Order</button>
				</td>
			</tr>
		</table>
	</form>
</div>

<script type="text/javascript">
	$(document).ready(function(){
		$('.add').click(function() {
			var index = $(this).attr('id');
			//$('#isOrdered['+index+']').val("Y");
			$(this).prev('input').val("Y");
		});
	});
</script>